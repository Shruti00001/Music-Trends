<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Trends Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">

    <div class="container mx-auto p-4 md:p-8">

        <!-- Header Section -->
        <header class="text-center py-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">Music Trends Analytics</h1>
            <p class="mt-2 text-gray-600">Explore insights and trends in the music industry.</p>
        </header>

        <!-- Main Content Grid -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            
            <!-- Filters and Controls -->
            <div class="lg:col-span-1 bg-white rounded-xl shadow-lg p-6 h-fit">
                <h2 class="text-2xl font-semibold mb-4 text-center">Dashboard Controls</h2>

                <!-- Genre Filter -->
                <div class="mb-6">
                    <label for="genre-filter" class="block text-sm font-medium text-gray-700 mb-2">Select Genre</label>
                    <select id="genre-filter" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                        <option value="All">All Genres</option>
                        <option value="Pop">Pop</option>
                        <option value="Hip Hop">Hip Hop</option>
                        <option value="Rock">Rock</option>
                        <option value="Electronic">Electronic</option>
                        <option value="Jazz">Jazz</option>
                    </select>
                </div>

                <!-- Card for Key Metrics -->
                <div class="bg-blue-500 text-white rounded-lg p-6 shadow-md">
                    <h3 class="text-lg font-semibold mb-2">Key Metric</h3>
                    <div id="total-songs" class="text-3xl font-bold">1,000+</div>
                    <p class="text-sm mt-1 opacity-80">Total songs analyzed</p>
                </div>
            </div>

            <!-- Charts and Visualizations -->
            <div class="lg:col-span-2 space-y-6">

                <!-- Monthly Trends Chart -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold mb-4 text-center">Monthly Song Releases by Genre</h2>
                    <div class="relative h-64 sm:h-80 md:h-96">
                        <canvas id="monthly-chart"></canvas>
                    </div>
                </div>

                <!-- Top Artists Chart -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold mb-4 text-center">Top Artists by Popularity</h2>
                    <div class="relative h-64 sm:h-80 md:h-96">
                        <canvas id="artists-chart"></canvas>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // Synthetic Data Generation
        const generateData = () => {
            const genres = ['Pop', 'Hip Hop', 'Rock', 'Electronic', 'Jazz'];
            const artists = ['Taylor Swift', 'Drake', 'Ed Sheeran', 'The Weeknd', 'Kendrick Lamar', 'Adele', 'Coldplay'];
            const data = [];
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            
            for (let i = 0; i < 2000; i++) {
                const genre = genres[Math.floor(Math.random() * genres.length)];
                const artist = artists[Math.floor(Math.random() * artists.length)];
                const month = months[Math.floor(Math.random() * months.length)];
                const streams = Math.floor(Math.random() * 50000000) + 1000000;

                data.push({
                    id: i,
                    month,
                    genre,
                    artist,
                    streams
                });
            }
            return data;
        };

        const musicData = generateData();

        let monthlyChart, artistsChart;

        // Function to render charts based on selected genre
        const renderCharts = (selectedGenre) => {
            const filteredData = selectedGenre === 'All' 
                ? musicData 
                : musicData.filter(d => d.genre === selectedGenre);

            // Update Total Songs Metric
            document.getElementById('total-songs').textContent = filteredData.length.toLocaleString();

            // Monthly Trends Chart
            if (monthlyChart) monthlyChart.destroy();
            
            const monthlyCounts = filteredData.reduce((acc, curr) => {
                acc[curr.month] = (acc[curr.month] || 0) + 1;
                return acc;
            }, {});

            const sortedMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const labels = sortedMonths.filter(month => monthlyCounts[month]);
            const values = labels.map(month => monthlyCounts[month] || 0);

            const monthlyCtx = document.getElementById('monthly-chart').getContext('2d');
            monthlyChart = new Chart(monthlyCtx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Songs Released',
                        data: values,
                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 1,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });

            // Top Artists Chart
            if (artistsChart) artistsChart.destroy();

            const artistPopularity = filteredData.reduce((acc, curr) => {
                acc[curr.artist] = (acc[curr.artist] || 0) + curr.streams;
                return acc;
            }, {});

            const sortedArtists = Object.entries(artistPopularity)
                .sort(([, a], [, b]) => b - a)
                .slice(0, 10);

            const artistLabels = sortedArtists.map(item => item[0]);
            const artistValues = sortedArtists.map(item => item[1]);

            const artistsCtx = document.getElementById('artists-chart').getContext('2d');
            artistsChart = new Chart(artistsCtx, {
                type: 'doughnut',
                data: {
                    labels: artistLabels,
                    datasets: [{
                        label: 'Total Streams',
                        data: artistValues,
                        backgroundColor: [
                            '#3b82f6', '#60a5fa', '#93c5fd', '#dbeafe', '#2563eb',
                            '#1d4ed8', '#1e40af', '#172554', '#0c4a6e', '#155e75'
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                }
            });
        };

        // Event listener for genre filter
        document.getElementById('genre-filter').addEventListener('change', (event) => {
            renderCharts(event.target.value);
        });

        // Initial render on page load
        window.onload = () => {
            renderCharts('All');
        };

    </script>
</body>
</html>
